stop() {
	echo "most recent command had non-zero exit code, commit aborted"
	exit 1
}

make clean all || stop

./build/test/test || stop

cp ./skull/skull ./build/skull/skull
./test/sh/main.sh || stop

valgrind --leak-check=full ./build/test/test || stop
echo

./.github/workflows/clang_tidy.sh || stop

./.github/workflows/line_len.sh || stop

cd test/docs/c-integration/
make SKULL=../../../build/skull/skull || stop
